# 真实推特监控系统

## 功能特性

✅ **真实推文检测**：使用Selenium WebDriver替代模拟数据，能够真正检测推特发文
✅ **完整推文链接**：自动生成正确的推文URL（https://twitter.com/{username}/status/{tweetId}）
✅ **推文内容预览**：提供推文内容的预览和完整内容展示
✅ **智能重试机制**：网络异常时自动重试，失败时重新初始化WebDriver
✅ **系统通知**：macOS系统级通知提醒
✅ **详细日志**：完整的监控日志记录

## 技术实现

### 核心组件

1. **TwitterMonitor**: 主监控器，使用Selenium WebDriver实现真实推文检测
2. **TweetParser**: 推文解析器，负责从网页DOM中提取推文信息
3. **Tweet**: 推文数据模型，包含ID、内容、链接、时间等完整信息
4. **WebDriverConfig**: WebDriver配置管理，支持无头模式和反检测

### 配置说明

```yaml
# Twitter监控配置
twitter:
  monitor:
    enabled: true                    # 是否启用监控
    target-user: xiaozhaolucky     # 目标用户
    target-url: https://x.com/xiaozhaolucky   # 目标URL
    timeout: 30                     # 超时时间（秒）
    max-retries: 3                  # 最大重试次数

# WebDriver配置
webdriver:
  headless: true                    # 无头模式
  timeout: 30                      # 页面加载超时
  window-size: 1920,1080          # 浏览器窗口大小
```

## 使用方法

### 1. 启动应用
```bash
mvn spring-boot:run
```

### 2. 监控输出
当检测到新推文时，系统会显示：
```
================================================================================
🚨 Twitter 新推文提醒 🚨
用户: @xiaozhaolucky
推文ID: 1234567890123456789
推文链接: https://twitter.com/xiaozhaolucky/status/1234567890123456789
发布时间: 2024-01-01T12:00:00
检测时间: 2024-01-01T12:00:30
内容预览: 这是一条新推文的内容预览...
完整内容: 这是一条新推文的完整内容
================================================================================
```

### 3. 系统通知
macOS用户会收到系统级推送通知。

## 与之前版本的区别

| 功能 | 之前版本 | 新版本 |
|-----|---------|--------|
| 推文检测 | ❌ 模拟数据 | ✅ 真实检测 |
| 推文链接 | ❌ 无链接 | ✅ 完整URL |
| 推文内容 | ❌ 无内容 | ✅ 完整内容 |
| 错误处理 | ❌ 基础处理 | ✅ 智能重试 |
| 推文ID | ❌ 时间戳模拟 | ✅ 真实ID |

## 技术架构

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   TwitterService │───▶│  TwitterMonitor │───▶│   TweetParser   │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                │                       │
                                ▼                       ▼
                        ┌─────────────────┐    ┌─────────────────┐
                        │ WebDriverConfig │    │      Tweet      │
                        └─────────────────┘    └─────────────────┘
                                │                       │
                                ▼                       ▼
                        ┌─────────────────┐    ┌─────────────────┐
                        │ Selenium WebDriver│    │   通知系统      │
                        └─────────────────┘    └─────────────────┘
```

## 注意事项

1. **Chrome浏览器依赖**: 需要系统安装Chrome浏览器
2. **网络稳定性**: 推特访问可能受网络环境影响
3. **反爬虫机制**: Twitter有反爬虫机制，建议适当设置检查间隔
4. **资源消耗**: WebDriver会消耗一定系统资源

## 故障排除

1. **WebDriver初始化失败**: 检查Chrome浏览器是否正确安装
2. **推文解析失败**: Twitter页面结构可能变化，需要更新选择器
3. **网络连接问题**: 检查网络连接和代理设置
